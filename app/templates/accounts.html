{% extends 'common/layout.html' %}
{% block css %}
    <link href="{{ url_for('static', filename='css/bootstrap-dialog.css') }}" rel="stylesheet">
{% endblock %}
{% block body %}
    <div class="page-header">
        <h3>Accounts &nbsp;&nbsp;
            <a href="/add_account" class="btn btn btn-info btn-xs" role="button">
                <i class="fa fa-plus"></i>
            </a>
        </h3>
    </div>
    {% for account in accounts.values() %}
	<div class="col-sm-6">
		<div class="panel panel-default">
			<div class="panel-heading">
			    <h3 class="panel-title">{{ account.name }}
			   	<div class="btn-toolbar pull-right" role="toolbar">
			    	<div class="btn-group btn-group-xs">
			    		<a href="/delete_account/{{ account.id }}" class="btn btn-danger confirmdelete" role="button"><i class="fa fa-trash-o"></i></a>
						<a href="/account/{{ account.id }}/transactions" class="btn btn-primary" role="button">select</a>
					</div>
				</div>
				</h3>
			</div>
			<div class="panel-body">
			    <!-- current balance -->
			    <div class="row">
			      <div class="col-sm-6 text-right">
			        <small><strong>current balance</strong></small>
			      </div>
			      <div class="col-sm-6">
			          {{ account.amount }} &nbsp;<i class="fa fa-{{account.currency}}"></i>
			      </div>
			    </div>
			    <!-- predicted balance -->
			    <div class="row">
			      <div class="col-sm-6 text-right">
			        <small><strong>end of month balance</strong></small>
			      </div>
			      <div class="col-sm-6">
			          236 &nbsp;<i class="fa fa-{{account.currency}}"></i>
			      </div>
			    </div>
			</div>
		</div>
	</div>
	{% endfor %}
{% endblock %}
{% block javascript %}
	<script src="{{ url_for('static', filename='js/bootstrap-dialog.min.js') }}"></script>
    <script type='text/javascript'>
        $(document).on("click", ".confirmdelete", function(e) {
            var link = $(this).attr("href"); // "get" the intended link in a var
            e.preventDefault();
            new BootstrapDialog.show({
                type: 'type-danger',
                title: 'Delete Scheduled Transaction',
                message: 'Are you sure that you want to delete this scheduled transaction?',
                buttons: [{ label: 'Cancel',
                            cssClass: 'btn-default',
                            action: function(dialogRef) {
                                dialogRef.close()
                            }}, 
                          { label: 'Yes',
                            cssClass: 'btn-danger',
                            action: function(result) {
                                if (result) {
                                    document.location.href = link;
                                } 
                            }}]
            });
        });
    </script>
{% endblock javascript %}